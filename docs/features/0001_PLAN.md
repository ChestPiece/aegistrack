# User Tasks and Projects Pages Implementation

## Overview

Create user-facing Tasks and Projects pages based on the screenshots provided showing 404 errors at `/tasks` and `/projects`. The dashboard currently displays task and project statistics, but dedicated pages are missing. These pages will follow the same design patterns as the existing admin pages (`/admin/tasks` and `/admin/projects`) but filtered to show only user-specific data.

## Proposed Changes

### User Interface - Tasks Page

#### [NEW] [MyTasks.tsx](file:///c:/Users/Anas/Desktop/aegistrack-project-hub/src/pages/MyTasks.tsx)

Create a new user-facing Tasks page at `/tasks` route that:

- Displays tasks assigned to the current user (filtered by `assigned_to === user.id`)
- Shows task title, description, project name, deadline, and status
- Allows status updates (pending → in_progress → completed)
- Displays empty state message when no tasks exist
- Uses card-based layout matching admin Tasks page design
- Includes status badges with color coding
- Shows deadline with calendar icon
- Fetches from `tasks` table with join to `projects` and `profiles` tables

### User Interface - Projects Page

#### [NEW] [MyProjects.tsx](file:///c:/Users/Anas/Desktop/aegistrack-project-hub/src/pages/MyProjects.tsx)

Create a new user-facing Projects page at `/projects` route that:

- Displays projects the user is a member of (via `project_members` table join)
- Shows project title, description, status badge, deadline, member count
- Displays task completion progress bar with percentage
- Uses grid layout (2-3 columns) matching admin Projects page
- Shows empty state when user has no projects
- Fetches from `projects` table joined with `project_members` where `user_id === user.id`

---

### Routing Configuration

#### [MODIFY] [App.tsx](file:///c:/Users/Anas/Desktop/aegistrack-project-hub/src/App.tsx)

Add two new protected routes for regular users:

- `/tasks` route pointing to `MyTasks` component
- `/projects` route pointing to `MyProjects` component
- Both wrapped in `ProtectedRoute` and `AppLayout` components
- Import the new page components

The sidebar already references these routes (lines 46-47 in `AppSidebar.tsx`), so no sidebar changes needed.

---

### Database Queries

Both pages will use Supabase client to query:

**Tasks Query:**

```sql
SELECT tasks.*, projects(title), profiles(full_name, email)
FROM tasks
WHERE assigned_to = current_user_id
ORDER BY created_at DESC
```

**Projects Query:**

```sql
SELECT projects.*, project_members(count), tasks(count, status)
FROM projects
JOIN project_members ON projects.id = project_members.project_id
WHERE project_members.user_id = current_user_id
ORDER BY created_at DESC
```

## Verification Plan

### Automated Tests

No existing test suite found in the codebase. Skipping automated test creation for this feature.

### Manual Verification

1. **Navigate to Tasks page:**

   - Start the dev server: `npm run dev` (already running)
   - Log in as a regular (non-admin) user
   - Click "My Tasks" in the sidebar or navigate to `http://localhost:8080/tasks`
   - Verify page loads without 404 error
   - Verify tasks assigned to current user are displayed
   - If no tasks exist, verify empty state message appears

2. **Test Tasks functionality:**

   - Verify each task card shows: title, description, project name, assigned user, deadline, status
   - Click status dropdown and change a task status
   - Verify status updates in real-time and toast notification appears
   - Verify dashboard statistics update accordingly

3. **Navigate to Projects page:**

   - Click "Projects" in the sidebar or navigate to `http://localhost:8080/projects`
   - Verify page loads without 404 error
   - Verify projects the user is a member of are displayed
   - If no projects exist, verify empty state message appears

4. **Test Projects display:**

   - Verify each project card shows: title, description, status badge, deadline, member count, progress bar
   - Verify progress percentage calculation is accurate
   - Verify completion stats (X of Y tasks completed)

5. **Cross-check with Dashboard:**
   - Return to `/dashboard`
   - Verify statistics (My Tasks, In Progress, Overdue, My Projects) match the data shown in Tasks and Projects pages

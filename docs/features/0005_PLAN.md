# Aegis Track Feature Implementation Plan

This plan outlines the steps to implement and enhance the Aegis Track project features based on the provided review document. The goal is to ensure a robust, secure, and user-friendly task management system.

## User Review Required

> [!IMPORTANT]
>
> - **Notification System**: A new notification system (backend + frontend) needs to be implemented from scratch as it appears to be missing.
> - **Admin Privileges**: Please confirm if the current `isAdmin` logic in controllers is sufficient or if dedicated admin routes are preferred. I will proceed with enhancing the existing logic.

## Proposed Changes

### Backend

#### [MODIFY] [userController.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/controllers/userController.ts)

- Ensure `syncUser` handles all necessary metadata.
- Verify `getAllUsers` is protected and accessible only to admins.

#### [MODIFY] [projectController.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/controllers/projectController.ts)

- Verify `getProjects` correctly filters for admins vs members.
- Ensure `createProject` allows assigning members.

#### [MODIFY] [taskController.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/controllers/taskController.ts)

- Implement/Verify CRUD operations for tasks.
- Ensure tasks can be assigned to members.
- Add logic to trigger notifications on task assignment/update.

#### [NEW] [notificationController.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/controllers/notificationController.ts)

- Create controller for fetching and marking notifications as read.

#### [NEW] [notificationRoutes.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/routes/notificationRoutes.ts)

- Define routes for notifications.

#### [NEW] [Notification.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/models/Notification.ts)

- Create Mongoose model for Notifications.

### Frontend

#### [MODIFY] [App.tsx](file:///c:/Users/Anas/Desktop/Development/aegistrack/src/App.tsx)

- Ensure routes are protected and correctly defined for Admin vs Member.

#### [MODIFY] [src/pages/auth](file:///c:/Users/Anas/Desktop/Development/aegistrack/src/pages/auth)

- Verify `Login.tsx` and `Signup.tsx` flow.
- Implement/Verify Logout functionality (usually in a layout/header).

#### [MODIFY] [src/pages/admin](file:///c:/Users/Anas/Desktop/Development/aegistrack/src/pages/admin)

- Enhance `AdminDashboard.tsx` to show system-wide stats.
- Ensure `Tasks.tsx` allows admin to manage all tasks.

#### [NEW] [src/pages/user/UserDashboard.tsx](file:///c:/Users/Anas/Desktop/Development/aegistrack/src/pages/user/UserDashboard.tsx)

- Create dashboard for members to view their projects and tasks.

#### [NEW] [src/components/NotificationBell.tsx](file:///c:/Users/Anas/Desktop/Development/aegistrack/src/components/NotificationBell.tsx)

- Create a component to display notifications.

## Verification Plan

### Automated Tests

- **Backend Tests**: Run existing backend tests (if any) or create simple script to test API endpoints using `curl` or a test script.
  - Test `POST /api/users/sync`
  - Test `GET /api/projects` (Admin vs Member)
  - Test `POST /api/tasks`
  - Test `GET /api/notifications`

### Manual Verification

1.  **Auth Flow**:
    - Register a new user via Frontend.
    - Login as Admin (if pre-seeded) and verify Admin Dashboard.
    - Login as Member and verify User Dashboard.
2.  **Project/Task Flow**:
    - Admin creates a project and assigns a member.
    - Admin creates a task and assigns it to the member.
    - Member logs in and sees the project and task.
    - Member updates task status.
    - Admin sees the status update.
3.  **Notifications**:
    - Verify member receives notification when task is assigned.

# Team Member CRUD Implementation Plan

## Description

Add full CRUD (Create, Read, Update, Delete) functionality for team members in the Admin dashboard. Currently only Read is implemented. This will allow admins to manage user roles and details.

## User Review Required

> [!IMPORTANT]
>
> - **User Creation**: Creating new users requires Supabase Auth signup. Should admins be able to create users directly, or should users self-register and admins just manage roles?
> - **User Deletion**: Should deletion remove the user from both Supabase Auth and MongoDB, or just mark them as inactive in MongoDB?
>
> **Proposed Approach**:
>
> - Skip Create for now (users self-register)
> - Implement Update (role, fullName)
> - Implement Delete (soft delete - mark as inactive in MongoDB only)

## Proposed Changes

### Backend

#### [MODIFY] [userController.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/controllers/userController.ts)

- Add `updateUser` function to update user role and fullName (admin only)
- Add `deleteUser` function to mark user as inactive (admin only)

#### [MODIFY] [userRoutes.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/routes/userRoutes.ts)

- Add `PUT /:id` route for updating users
- Add `DELETE /:id` route for deleting/deactivating users

#### [MODIFY] [User.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/backend/src/models/User.ts)

- Add `isActive` boolean field (default: true) for soft delete

### Frontend

#### [MODIFY] [api.ts](file:///c:/Users/Anas/Desktop/Development/aegistrack/src/services/api.ts)

- Add `userService.update(id, data)` function
- Add `userService.delete(id)` function

#### [MODIFY] [Team.tsx](file:///c:/Users/Anas/Desktop/Development/aegistrack/src/pages/admin/Team.tsx)

- Add "Edit" button to each team member card
- Add Edit dialog with form for fullName and role
- Add "Delete" button with confirmation dialog
- Filter out inactive users from display

## Verification Plan

### Backend Tests

Run the backend server and test endpoints using curl:

```bash
# Update user role (replace TOKEN and USER_ID)
curl -X PUT http://localhost:5000/api/users/USER_ID \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"role": "admin"}'

# Delete user (replace TOKEN and USER_ID)
curl -X DELETE http://localhost:5000/api/users/USER_ID \
  -H "Authorization: Bearer TOKEN"
```

### Manual Verification

1. **Login as Admin**
2. **Navigate to Team Members page**
3. **Edit User**:
   - Click "Edit" button on a member card
   - Change role from "member" to "admin"
   - Change fullName
   - Save changes
   - Verify changes are reflected in the UI
4. **Delete User**:
   - Click "Delete" button on a member card
   - Confirm deletion
   - Verify user is removed from the list
5. **Login as Non-Admin**:
   - Verify Team Members page is not accessible
